@page
@model RazorPagesMovie.Pages.Product.DetailsModel

@{
    ViewData["Title"] = "Детали товара";
}

<h2>Детали товара</h2>

<div class="card">
    <div class="card-body">
        <dl class="row mb-0">
            <dt class="col-sm-3 fw-bold">Название товара</dt>
            <dd class="col-sm-9">@Html.DisplayFor(model => model.Product.Name)</dd>

            <dt class="col-sm-3 fw-bold">Тип искусства</dt>
            <dd class="col-sm-9">@Html.DisplayFor(model => model.Product.TypeArt)</dd>

            <dt class="col-sm-3 fw-bold">Количество</dt>
            <dd class="col-sm-9">@Html.DisplayFor(model => model.Product.QuantityForSale)</dd>

            <dt class="col-sm-3 fw-bold">Цена</dt>
            <dd class="col-sm-9">@Html.DisplayFor(model => model.Product.Price)</dd>

            <dt class="col-sm-3 fw-bold">Статус</dt>
            <dd class="col-sm-9">
                @switch (Model.Product.Status)
                {
                    case "available":
                        <text>В наличии</text>
                        break;
                    case "reserved":
                        <text>Зарезервирован</text>
                        break;
                    case "sold":
                        <text>Продан</text>
                        break;
                    default:
                        @Model.Product.Status
                        break;
                }
            </dd>

            <dt class="col-sm-3 fw-bold">Продавец</dt>
            <dd class="col-sm-9">
                @if (Model.Product.IdSellerNavigation != null)
                {
                    <text>@Model.Product.IdSellerNavigation.AccountName (@Model.Product.IdSellerNavigation.Email)</text>
                }
                else
                {
                    <text>— не указан —</text>
                }
            </dd>

            <dt class="col-sm-3 fw-bold">Индивид. покупатель</dt>
            <dd class="col-sm-9">
                @if (Model.Product.IdIndivBuyerNavigation != null)
                {
                    <text>@Model.Product.IdIndivBuyerNavigation.AccountName (@Model.Product.IdIndivBuyerNavigation.Email)</text>
                }
                else
                {
                    <text>— отсутствует —</text>
                }
            </dd>

            <dt class="col-sm-3 fw-bold">Материалы</dt>
            <dd class="col-sm-9">
                @if (Model.Product.ConnectProductMaterials?.Any() == true)
                {
                    <ul class="list-unstyled mb-0">
                        @foreach (var cpm in Model.Product.ConnectProductMaterials)
                        {
                            <li>
                                @cpm.IdMaterialNavigation?.MaterialName
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <text>— не указаны —</text>
                }
            </dd>
        </dl>
    </div>
</div>

<div class="mt-3">
    @if (User.IsInRole("admin"))
    {
        <a asp-page="./Edit" asp-route-id="@Model.Product.IdProduct" class="btn btn-primary">Изменить</a>
        <a asp-page="./Index" class="btn btn-secondary ms-2">Назад в таблицу "Товары"</a>
    }
    <a asp-page="/Index" class="btn btn-secondary ms-2">Вернуться в список товаров для продаж</a>

    <a href="@Model.ReturnUrl" class="btn btn-secondary">Вернуться</a>
</div>